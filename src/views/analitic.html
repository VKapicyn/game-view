{% extends "templates/page.html" %}
        <!-- Для шапки и футера однозначно нужен темплейт -->
{% block content %}
<div class="row">
    <div class="col-lg-12 col-sm-12">
        <h3>Аналитика:</h3>
        <br><p>*Раунд*</p>
        <br><br>
        <div id="container"></div>
    </div>
</div>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/networkgraph.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script>Highcharts.addEvent(
    Highcharts.Series,
    'afterSetOptions',
    function (e) {
        var colors = Highcharts.getOptions().colors,
            i = 0,
            nodes = {};

        if (
            this instanceof Highcharts.seriesTypes.networkgraph &&
            e.options.id === 'lang-tree'
        ) {
            e.options.data.forEach(function (link) {

                if (link[0] === '1') {
                    nodes['1'] = {
                        id: '1',
                        marker: {
                            radius: 20
                        }
                    };
                    nodes[link[1]] = {
                        id: link[1],
                        marker: {
                            radius: 10
                        },
                        color: colors[i++]
                    };
                } else if (nodes[link[0]] && nodes[link[0]].color) {
                    nodes[link[1]] = {
                        id: link[1],
                        color: nodes[link[0]].color
                    };
                }
            });

            e.options.nodes = Object.keys(nodes).map(function (id) {
                return nodes[id];
            });
        }
    }
);

Highcharts.chart('container', {
    chart: {
        type: 'networkgraph',
        height: '400px'
    },
    title: {
        text: 'The Indo-European Language Tree'
    },
    subtitle: {
        text: 'A Force-Directed Network Graph in Highcharts'
    },
    plotOptions: {
        networkgraph: {
            keys: ['from', 'to'],
            layoutAlgorithm: {
                enableSimulation: true,
                friction: -0.1
            }
        }
    },
    series: [{
        dataLabels: {
            enabled: true,
            linkFormat: ''
        },
        id: 'lang-tree',
        data: [
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['1','a'],
        ['2','a'],
        ['2','a'],
        ['2','a'],
        ['2','b'],
        ['2','b'],
        ['3','b'],
        ['2','3'],
        ['1','3']
    ]//{{data | safe}}
    }]
});</script>
{% endblock %}